(this["webpackJsonpstore-lopez-andrea"]=this["webpackJsonpstore-lopez-andrea"]||[]).push([[0],[,,,,,,,function(e,t){},,,function(e,t,n){},,function(e,t,n){},,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var c=n(1),s=n.n(c),r=n(13),a=n.n(r),o=(n(18),n(19),n(20),n(0)),i=function(e){return Object(o.jsxs)("header",{className:"header",children:[Object(o.jsx)("img",{className:"img-header",src:"./images/header-x3.png",alt:"headphones"}),Object(o.jsx)("h1",{className:"title",children:"Electronics"})]})},l=(n(22),n(11),n(3)),u=s.a.createContext();n(23);var j=function(e){return Object(o.jsxs)("div",{className:"details flex-row ".concat(e.classContainer),children:[Object(o.jsx)("h5",{className:"normal-text center ".concat(e.classText),children:e.text}),Object(o.jsx)("img",{className:"center",src:"./images/coin.svg",alt:"icono"})]})},d=function(){var e=Object(c.useContext)(u).user;return Object(o.jsxs)("nav",{className:"nav flex-row",children:[Object(o.jsx)("div",{className:"container-logo",children:Object(o.jsx)("img",{src:"./images/aerolab-logo.svg",alt:"logo"})}),Object(o.jsxs)("div",{className:"user-points flex-row-center",children:[Object(o.jsx)("h3",{className:"username",children:e.name}),Object(o.jsx)(j,{text:e.points})]})]})},x=n(2),b=n.n(x),h=n(4),m="https://coding-challenge-api.aerolab.co/",O=Object({NODE_ENV:"production",PUBLIC_URL:"/rewards-store-andrea-lopez",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_KEY,f={"Content-Type":"application/json",Authorization:"Bearer ".concat(O)},p=function(){var e=Object(h.a)(b.a.mark((function e(){var t,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(m+"user/me",{headers:f});case 3:return t=e.sent,e.next=6,t.json();case 6:return n=e.sent,e.abrupt("return",n);case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),g=(n(12),function(){var e=Object(c.useContext)(u),t=e.reedemStatus,n=e.setReedemStatus;return t.msg?Object(o.jsx)("div",{className:"modal center",children:Object(o.jsxs)("div",{className:"container-msj flex-column ".concat(t.status?"success":"error"),children:[Object(o.jsx)("div",{children:Object(o.jsx)("img",{className:"image-ok-error",alt:"close",src:t.status?"./images/success.svg":"./images/error.png"})}),Object(o.jsx)("h4",{className:"text10",children:t.msg}),Object(o.jsx)("button",{className:"button-ok-error",onClick:function(){return n({})},children:t.status?"continue":"try again"})]})}):null}),v=n(32),N=(n(25),n(26),function(e){return Object(o.jsx)("button",{className:"btn-filter flex-row center ".concat(e.classbutton),onClick:e.handlerOnClick,children:Object(o.jsx)("h5",{className:"normal-text center text-full ".concat(e.classtext),children:e.text})})}),w=(n(27),function(e){return Object(o.jsxs)("div",{className:"flex-row btn-arrow center",children:[e.list.currentPage>1?Object(o.jsx)("button",{onClick:function(){return e.list.prev()},className:"container-arrow",children:Object(o.jsx)("img",{src:"./images/arrow-left.svg",alt:"flecha"})}):null,e.list.currentPage!==e.list.maxPage?Object(o.jsx)("button",{onClick:function(){return e.list.next()},className:"container-arrow",children:Object(o.jsx)("img",{src:"./images/arrow-right.svg",alt:"flecha"})}):null]})}),C=n(8),y=function(){var e=Object(h.a)(b.a.mark((function e(){var t,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(m+"products",{headers:f});case 3:return t=e.sent,e.next=6,t.json();case 6:return n=e.sent,e.abrupt("return",n);case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=Object(c.useContext)(u),t=e.totalProducts,n=e.user,s=e.setProducts,r=e.paginationList,a=e.products;return Object(o.jsxs)("aside",{className:"filter flex-row",children:[Object(o.jsx)("div",{className:"container-page center",children:Object(o.jsxs)("h3",{className:"normal-text",children:[r.currentData().length," of ",t," products"]})}),Object(o.jsx)(w,{list:r}),Object(o.jsxs)("div",{className:"container-filter flex-row",children:[Object(o.jsx)("div",{className:"container-sort",children:Object(o.jsx)("h3",{className:"normal-text",children:"Sort by:"})}),Object(o.jsxs)("div",{className:"container-btn flex-row",children:[Object(o.jsxs)("div",{className:"flex-row container-btn-filter",children:[Object(o.jsx)(N,{text:"Lowest price",handlerOnClick:function(){var e=function(e){var t=e.sort((function(e,t){return e.cost>t.cost?1:e.cost<t.cost?-1:0}));return Object(C.a)(t)}(a);s(e)}}),Object(o.jsx)(N,{text:"Highest price",handlerOnClick:function(){var e=function(e){var t=e.sort((function(e,t){return e.cost>t.cost?-1:e.cost<t.cost?1:0}));return Object(C.a)(t)}(a);s(e)}})]}),Object(o.jsxs)("div",{className:"flex-row container-btn-filter",children:[Object(o.jsx)(N,{text:"Availability",handlerOnClick:function(){var e=function(e,t){return Object(C.a)(e).filter((function(e){return e.cost<t.points}))}(a,n);s(e)}}),Object(o.jsx)(N,{text:"Clear sort",handlerOnClick:function(){y().then((function(e){return s(e)}))},classbutton:"pink",classtext:"text-white"})]})]})]})]})},P=(n(28),n(10),function(){var e=Object(h.a)(b.a.mark((function e(t){var n,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={productId:t},e.next=4,fetch(m+"redeem",{method:"POST",headers:f,body:JSON.stringify(n)});case 4:return c=e.sent,e.abrupt("return",c);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()),S=function(e){var t=Object(c.useContext)(u),n=t.handlerSubtractPoint,s=t.setReedemStatus;return Object(o.jsxs)("div",{className:"selected-product flex-column",children:[Object(o.jsx)("div",{className:"container-buy-white",children:Object(o.jsx)("img",{src:"./images/buy-white.svg",alt:"bag"})}),Object(o.jsxs)("div",{className:"flex-row center",children:[Object(o.jsx)("h3",{className:"text-product-point",children:e.points}),Object(o.jsx)("img",{className:"white-bag",src:"./images/coin.svg",alt:"coin"})]}),Object(o.jsx)(N,{text:"Redeem now",handlerOnClick:function(){P(e.id).then((function(t){if(n(e.points),!t.ok)throw Error(t.status);return t.json()})).then((function(e){s({status:!0,msg:e.message})})).catch((function(e){s({status:!1,msg:"ups hubo un error"}),console.log(e)}))}})]})},T=function(e){var t=Object(c.useContext)(u).user,n=Object(c.useState)(!1),s=Object(l.a)(n,2),r=s[0],a=s[1],i=function(){a(!r)},d=e.points-t.points;return Object(o.jsxs)("div",{className:"product flex-column center",onMouseEnter:i,onMouseLeave:i,children:[Object(o.jsxs)("div",{className:"container-position",children:[Object(o.jsxs)("div",{className:"product-container",children:[Object(o.jsx)("img",{className:"photo",src:e.url,alt:"producto"}),t.points<e.points?Object(o.jsx)(j,{classContainer:"btn-neededPoints top-icono center",classText:"text-neededPoints",text:"You need ".concat(d)}):Object(o.jsx)("div",{className:"top-icono blue-bag",children:Object(o.jsx)("img",{src:"./images/buy-blue.svg",alt:"bag"})})]}),Object(o.jsxs)("div",{className:"container-description flex-column",children:[Object(o.jsx)("h4",{className:"product-name",children:e.name}),Object(o.jsx)("h4",{className:"product-category",children:e.category})]})]}),t.points>e.points&&r?Object(o.jsx)(S,{points:e.points,id:e.id}):null]})},E=function(){var e=Object(c.useContext)(u).paginationList;return Object(o.jsx)("main",{className:"result flex-row",children:e.currentData().length>0?e.currentData().map((function(e){return Object(o.jsx)(T,{id:e._id,url:e.img.hdUrl,name:e.name,category:e.category,points:e.cost},e._id)})):null})},D=function(e){return Object(o.jsxs)("footer",{className:"footer flex-row",children:[Object(o.jsxs)("h3",{className:"normal-text",children:[e.list.currentData().length," of ",e.totalList," products"]}),Object(o.jsx)(w,{list:e.list})]})},L=function(){var e=Object(c.useContext)(u),t=e.totalProducts,n=e.paginationList,s=e.setProducts;return Object(c.useEffect)((function(){y().then((function(e){s(e),console.log(),console.log("Home side effect")}))}),[s]),console.log(),console.log("render Home"),Object(o.jsxs)("section",{className:"section",children:[Object(o.jsx)(k,{}),Object(o.jsx)(E,{}),Object(o.jsx)(D,{list:n,totalList:t})]})},_=function(e){return Object(o.jsxs)("div",{className:"flex-row small-container",children:[Object(o.jsx)("div",{className:"container-imgHistory",children:Object(o.jsx)("img",{className:"h100",src:e.url,alt:"producto"})}),Object(o.jsxs)("div",{children:[Object(o.jsxs)("h3",{className:"small-text",children:["Category: ",e.category]}),Object(o.jsxs)("h3",{className:"small-text",children:["Cost: ",e.cost]}),Object(o.jsxs)("h3",{className:"small-text",children:["Date: ",e.date]})]})]})},H=n(7),A=function(){var e=Object(h.a)(b.a.mark((function e(){var t,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(m+"user/history",{headers:f});case 3:return t=e.sent,e.next=6,t.json();case 6:return n=e.sent,e.abrupt("return",n);case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=Object(c.useContext)(u),t=e.paginationHistoryList,n=e.setHistory,s=e.totalHistory;return Object(c.useEffect)((function(){A().then((function(e){n(e)}))}),[n]),Object(o.jsxs)("section",{className:"section",children:[Object(o.jsx)(H.Title,{title:"Get user redeem history"}),t.currentData().map((function(e){return Object(o.jsx)(_,{url:e.img.url,category:e.category,cost:e.cost,date:e.createDate},e.createDate)})),Object(o.jsx)(D,{list:t,totalList:s})]})},F=(n(29),function(){var e=Object(h.a)(b.a.mark((function e(t){var n,c,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={amount:t},e.prev=1,e.next=4,fetch(m+"user/points",{method:"POST",headers:f,body:JSON.stringify(n)});case 4:return c=e.sent,e.next=7,c.json();case 7:return s=e.sent,e.abrupt("return",s);case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}()),z=function(e){var t=Object(c.useContext)(u),n=t.points,s=t.handlerAddPoint,r=t.setProducts;return Object(o.jsx)("div",{className:"container-selector flex-row center",children:Object(o.jsx)("button",{value:n,onClick:function(){return t=e.value,F(t).then((function(e){s(t),alert(e.message)})),void y().then((function(e){r(e)}));var t},className:"selector normal-text",children:e.description})})},B=function(){return Object(o.jsxs)("section",{className:"section",children:[Object(o.jsx)(H.Title,{title:"Add points to your user"}),Object(o.jsxs)("div",{className:"center flex-column",children:[Object(o.jsx)(z,{description:"add 1000 points",value:1e3}),Object(o.jsx)(z,{description:"add 5000 points",value:5e3}),Object(o.jsx)(z,{description:"add 7500 points",value:7500})]})]})},I=function(){return Object(o.jsx)("div",{className:"modal center bg-green",children:Object(o.jsx)("img",{src:"./images/notFound.png",alt:"error"})})},J=function(){return Object(o.jsxs)(v.b,{children:[Object(o.jsx)(v.a,{path:"/",element:Object(o.jsx)(L,{})}),Object(o.jsx)(v.a,{path:"/history",element:Object(o.jsx)(R,{})}),Object(o.jsx)(v.a,{path:"/points",element:Object(o.jsx)(B,{})}),Object(o.jsx)(v.a,{path:"/*",element:Object(o.jsx)(I,{})})]})};var K=function(){var e=Object(c.useContext)(u).setUser;return Object(c.useEffect)((function(){p().then((function(t){e(t)}))}),[e]),Object(o.jsxs)("div",{children:[Object(o.jsx)(g,{}),Object(o.jsx)(d,{}),Object(o.jsx)(i,{}),Object(o.jsx)(J,{})]})},U=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,33)).then((function(t){var n=t.getCLS,c=t.getFID,s=t.getFCP,r=t.getLCP,a=t.getTTFB;n(e),c(e),s(e),r(e),a(e)}))};a.a.render(Object(o.jsx)(s.a.StrictMode,{children:Object(o.jsx)(K,{})}),document.getElementById("root")),U()}],[[30,1,2]]]);
//# sourceMappingURL=main.e6d587ef.chunk.js.map